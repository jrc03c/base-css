<div>
  <figure>
    <img src="" />
    <figcaption>A randomly-generated pattern</figcaption>
  </figure>

  <script>
    const figure = document.querySelector("figure")
    const img = figure.querySelector("img")
    const canvas = document.createElement("canvas")
    const width = 960
    const height = 320
    canvas.width = width
    canvas.height = height

    const context = canvas.getContext("2d")
    const blockSize = width / 32
    context.fillStyle = "rgb(235, 235, 235)"
    context.fillRect(0, 0, width, height)

    for (let x = 0; x < width + blockSize; x += blockSize) {
      for (let y = 0; y < height + blockSize; y += blockSize) {
        const v = Math.random() * (256 - 64) + 64
        context.beginPath()
        context.arc(x, y, blockSize / 4, 0, Math.PI * 2)
        context.fillStyle = `rgb(${v}, ${v}, ${v})`
        context.fill()
      }
    }

    img.src = canvas.toDataURL()
  </script>
</div>
